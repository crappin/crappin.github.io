<b><a href="data:text/html;base64, PCEtLUhUTUw6IGh0bWwuaHRtbC0tPgo8IURPQ1RZUEUgaHRtbD4KPGh0bWw+CiAgICA8aGVhZD4KICAgICAgICA8dGl0bGU+SFRNTDUgVGV0cmlzPC90aXRsZT4KICAgICAgICA8bGluayByZWw9J3N0eWxlc2hlZXQnIGhyZWY9J3N0eWxlLmNzcyc+CiAgICA8L2hlYWQ+CiAgICA8Ym9keT4KICAgICAgICA8YXVkaW8gaWQ9ImNsZWFyc291bmQiIHNyYz0ic291bmQvcG9wLm9nZyIgcHJlbG9hZD0iYXV0byI+PC9hdWRpbz4KICAgICAgICA8Y2FudmFzIHdpZHRoPSczMDAnIGhlaWdodD0nNjAwJz48L2NhbnZhcz4KICAgICAgICA8YnV0dG9uIGlkPSJwbGF5YnV0dG9uIiBvbmNsaWNrPSJwbGF5QnV0dG9uQ2xpY2tlZCgpOyI+UGxheTwvYnV0dG9uPgogICAgICAgIDxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+dmFyIENPTFMgPSAxMCwgUk9XUyA9IDIwOwp2YXIgYm9hcmQgPSBbXTsKdmFyIGxvc2U7CnZhciBpbnRlcnZhbDsKdmFyIGludGVydmFsUmVuZGVyOwp2YXIgY3VycmVudDsgLy8gY3VycmVudCBtb3Zpbmcgc2hhcGUKdmFyIGN1cnJlbnRYLCBjdXJyZW50WTsgLy8gcG9zaXRpb24gb2YgY3VycmVudCBzaGFwZQp2YXIgZnJlZXplZDsgLy8gaXMgY3VycmVudCBzaGFwZSBzZXR0bGVkIG9uIHRoZSBib2FyZD8KdmFyIHNoYXBlcyA9IFsKICAgIFsgMSwgMSwgMSwgMSBdLAogICAgWyAxLCAxLCAxLCAwLAogICAgICAxIF0sCiAgICBbIDEsIDEsIDEsIDAsCiAgICAgIDAsIDAsIDEgXSwKICAgIFsgMSwgMSwgMCwgMCwKICAgICAgMSwgMSBdLAogICAgWyAxLCAxLCAwLCAwLAogICAgICAwLCAxLCAxIF0sCiAgICBbIDAsIDEsIDEsIDAsCiAgICAgIDEsIDEgXSwKICAgIFsgMCwgMSwgMCwgMCwKICAgICAgMSwgMSwgMSBdCl07CnZhciBjb2xvcnMgPSBbCiAgICAnY3lhbicsICdvcmFuZ2UnLCAnYmx1ZScsICd5ZWxsb3cnLCAncmVkJywgJ2dyZWVuJywgJ3B1cnBsZScKXTsKCi8vIGNyZWF0ZXMgYSBuZXcgNHg0IHNoYXBlIGluIGdsb2JhbCB2YXJpYWJsZSAnY3VycmVudCcKLy8gNHg0IHNvIGFzIHRvIGNvdmVyIHRoZSBzaXplIHdoZW4gdGhlIHNoYXBlIGlzIHJvdGF0ZWQKZnVuY3Rpb24gbmV3U2hhcGUoKSB7CiAgICB2YXIgaWQgPSBNYXRoLmZsb29yKCBNYXRoLnJhbmRvbSgpICogc2hhcGVzLmxlbmd0aCApOwogICAgdmFyIHNoYXBlID0gc2hhcGVzWyBpZCBdOyAvLyBtYWludGFpbiBpZCBmb3IgY29sb3IgZmlsbGluZwoKICAgIGN1cnJlbnQgPSBbXTsKICAgIGZvciAoIHZhciB5ID0gMDsgeSA8IDQ7ICsreSApIHsKICAgICAgICBjdXJyZW50WyB5IF0gPSBbXTsKICAgICAgICBmb3IgKCB2YXIgeCA9IDA7IHggPCA0OyArK3ggKSB7CiAgICAgICAgICAgIHZhciBpID0gNCAqIHkgKyB4OwogICAgICAgICAgICBpZiAoIHR5cGVvZiBzaGFwZVsgaSBdICE9ICd1bmRlZmluZWQnICYmIHNoYXBlWyBpIF0gKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50WyB5IF1bIHggXSA9IGlkICsgMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRbIHkgXVsgeCBdID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8gbmV3IHNoYXBlIHN0YXJ0cyB0byBtb3ZlCiAgICBmcmVlemVkID0gZmFsc2U7CiAgICAvLyBwb3NpdGlvbiB3aGVyZSB0aGUgc2hhcGUgd2lsbCBldm9sdmUKICAgIGN1cnJlbnRYID0gNTsKICAgIGN1cnJlbnRZID0gMDsKfQoKLy8gY2xlYXJzIHRoZSBib2FyZApmdW5jdGlvbiBpbml0KCkgewogICAgZm9yICggdmFyIHkgPSAwOyB5IDwgUk9XUzsgKyt5ICkgewogICAgICAgIGJvYXJkWyB5IF0gPSBbXTsKICAgICAgICBmb3IgKCB2YXIgeCA9IDA7IHggPCBDT0xTOyArK3ggKSB7CiAgICAgICAgICAgIGJvYXJkWyB5IF1bIHggXSA9IDA7CiAgICAgICAgfQogICAgfQp9CgovLyBrZWVwIHRoZSBlbGVtZW50IG1vdmluZyBkb3duLCBjcmVhdGluZyBuZXcgc2hhcGVzIGFuZCBjbGVhcmluZyBsaW5lcwpmdW5jdGlvbiB0aWNrKCkgewogICAgaWYgKCB2YWxpZCggMCwgMSApICkgewogICAgICAgICsrY3VycmVudFk7CiAgICB9CiAgICAvLyBpZiB0aGUgZWxlbWVudCBzZXR0bGVkCiAgICBlbHNlIHsKICAgICAgICBmcmVlemUoKTsKICAgICAgICB2YWxpZCgwLCAxKTsKICAgICAgICBjbGVhckxpbmVzKCk7CiAgICAgICAgaWYgKGxvc2UpIHsKICAgICAgICAgICAgY2xlYXJBbGxJbnRlcnZhbHMoKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBuZXdTaGFwZSgpOwogICAgfQp9CgovLyBzdG9wIHNoYXBlIGF0IGl0cyBwb3NpdGlvbiBhbmQgZml4IGl0IHRvIGJvYXJkCmZ1bmN0aW9uIGZyZWV6ZSgpIHsKICAgIGZvciAoIHZhciB5ID0gMDsgeSA8IDQ7ICsreSApIHsKICAgICAgICBmb3IgKCB2YXIgeCA9IDA7IHggPCA0OyArK3ggKSB7CiAgICAgICAgICAgIGlmICggY3VycmVudFsgeSBdWyB4IF0gKSB7CiAgICAgICAgICAgICAgICBib2FyZFsgeSArIGN1cnJlbnRZIF1bIHggKyBjdXJyZW50WCBdID0gY3VycmVudFsgeSBdWyB4IF07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICBmcmVlemVkID0gdHJ1ZTsKfQoKLy8gcmV0dXJucyByb3RhdGVzIHRoZSByb3RhdGVkIHNoYXBlICdjdXJyZW50JyBwZXJwZW5kaWN1bGFybHkgYW50aWNsb2Nrd2lzZQpmdW5jdGlvbiByb3RhdGUoIGN1cnJlbnQgKSB7CiAgICB2YXIgbmV3Q3VycmVudCA9IFtdOwogICAgZm9yICggdmFyIHkgPSAwOyB5IDwgNDsgKyt5ICkgewogICAgICAgIG5ld0N1cnJlbnRbIHkgXSA9IFtdOwogICAgICAgIGZvciAoIHZhciB4ID0gMDsgeCA8IDQ7ICsreCApIHsKICAgICAgICAgICAgbmV3Q3VycmVudFsgeSBdWyB4IF0gPSBjdXJyZW50WyAzIC0geCBdWyB5IF07CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiBuZXdDdXJyZW50Owp9CgovLyBjaGVjayBpZiBhbnkgbGluZXMgYXJlIGZpbGxlZCBhbmQgY2xlYXIgdGhlbQpmdW5jdGlvbiBjbGVhckxpbmVzKCkgewogICAgZm9yICggdmFyIHkgPSBST1dTIC0gMTsgeSA+PSAwOyAtLXkgKSB7CiAgICAgICAgdmFyIHJvd0ZpbGxlZCA9IHRydWU7CiAgICAgICAgZm9yICggdmFyIHggPSAwOyB4IDwgQ09MUzsgKyt4ICkgewogICAgICAgICAgICBpZiAoIGJvYXJkWyB5IF1bIHggXSA9PSAwICkgewogICAgICAgICAgICAgICAgcm93RmlsbGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoIHJvd0ZpbGxlZCApIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdjbGVhcnNvdW5kJyApLnBsYXkoKTsKICAgICAgICAgICAgZm9yICggdmFyIHl5ID0geTsgeXkgPiAwOyAtLXl5ICkgewogICAgICAgICAgICAgICAgZm9yICggdmFyIHggPSAwOyB4IDwgQ09MUzsgKyt4ICkgewogICAgICAgICAgICAgICAgICAgIGJvYXJkWyB5eSBdWyB4IF0gPSBib2FyZFsgeXkgLSAxIF1bIHggXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICArK3k7CiAgICAgICAgfQogICAgfQp9CgpmdW5jdGlvbiBrZXlQcmVzcygga2V5ICkgewogICAgc3dpdGNoICgga2V5ICkgewogICAgICAgIGNhc2UgJ2xlZnQnOgogICAgICAgICAgICBpZiAoIHZhbGlkKCAtMSApICkgewogICAgICAgICAgICAgICAgLS1jdXJyZW50WDsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyaWdodCc6CiAgICAgICAgICAgIGlmICggdmFsaWQoIDEgKSApIHsKICAgICAgICAgICAgICAgICsrY3VycmVudFg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZG93bic6CiAgICAgICAgICAgIGlmICggdmFsaWQoIDAsIDEgKSApIHsKICAgICAgICAgICAgICAgICsrY3VycmVudFk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncm90YXRlJzoKICAgICAgICAgICAgdmFyIHJvdGF0ZWQgPSByb3RhdGUoIGN1cnJlbnQgKTsKICAgICAgICAgICAgaWYgKCB2YWxpZCggMCwgMCwgcm90YXRlZCApICkgewogICAgICAgICAgICAgICAgY3VycmVudCA9IHJvdGF0ZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZHJvcCc6CiAgICAgICAgICAgIHdoaWxlKCB2YWxpZCgwLCAxKSApIHsKICAgICAgICAgICAgICAgICsrY3VycmVudFk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGljaygpOwogICAgICAgICAgICBicmVhazsKICAgIH0KfQoKLy8gY2hlY2tzIGlmIHRoZSByZXN1bHRpbmcgcG9zaXRpb24gb2YgY3VycmVudCBzaGFwZSB3aWxsIGJlIGZlYXNpYmxlCmZ1bmN0aW9uIHZhbGlkKCBvZmZzZXRYLCBvZmZzZXRZLCBuZXdDdXJyZW50ICkgewogICAgb2Zmc2V0WCA9IG9mZnNldFggfHwgMDsKICAgIG9mZnNldFkgPSBvZmZzZXRZIHx8IDA7CiAgICBvZmZzZXRYID0gY3VycmVudFggKyBvZmZzZXRYOwogICAgb2Zmc2V0WSA9IGN1cnJlbnRZICsgb2Zmc2V0WTsKICAgIG5ld0N1cnJlbnQgPSBuZXdDdXJyZW50IHx8IGN1cnJlbnQ7CgogICAgZm9yICggdmFyIHkgPSAwOyB5IDwgNDsgKyt5ICkgewogICAgICAgIGZvciAoIHZhciB4ID0gMDsgeCA8IDQ7ICsreCApIHsKICAgICAgICAgICAgaWYgKCBuZXdDdXJyZW50WyB5IF1bIHggXSApIHsKICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGJvYXJkWyB5ICsgb2Zmc2V0WSBdID09ICd1bmRlZmluZWQnCiAgICAgICAgICAgICAgICAgIHx8IHR5cGVvZiBib2FyZFsgeSArIG9mZnNldFkgXVsgeCArIG9mZnNldFggXSA9PSAndW5kZWZpbmVkJwogICAgICAgICAgICAgICAgICB8fCBib2FyZFsgeSArIG9mZnNldFkgXVsgeCArIG9mZnNldFggXQogICAgICAgICAgICAgICAgICB8fCB4ICsgb2Zmc2V0WCA8IDAKICAgICAgICAgICAgICAgICAgfHwgeSArIG9mZnNldFkgPj0gUk9XUwogICAgICAgICAgICAgICAgICB8fCB4ICsgb2Zmc2V0WCA+PSBDT0xTICkgewogICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXRZID09IDEgJiYgZnJlZXplZCkgewogICAgICAgICAgICAgICAgICAgICAgICBsb3NlID0gdHJ1ZTsgLy8gbG9zZSBpZiB0aGUgY3VycmVudCBzaGFwZSBpcyBzZXR0bGVkIGF0IHRoZSB0b3AgbW9zdCByb3cKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXlidXR0b24nKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIHBsYXlCdXR0b25DbGlja2VkKCkgewogICAgbmV3R2FtZSgpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBsYXlidXR0b24iKS5kaXNhYmxlZCA9IHRydWU7Cn0KCmZ1bmN0aW9uIG5ld0dhbWUoKSB7CiAgICBjbGVhckFsbEludGVydmFscygpOwogICAgaW50ZXJ2YWxSZW5kZXIgPSBzZXRJbnRlcnZhbCggcmVuZGVyLCAzMCApOwogICAgaW5pdCgpOwogICAgbmV3U2hhcGUoKTsKICAgIGxvc2UgPSBmYWxzZTsKICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoIHRpY2ssIDQwMCApOwp9CgpmdW5jdGlvbiBjbGVhckFsbEludGVydmFscygpewogICAgY2xlYXJJbnRlcnZhbCggaW50ZXJ2YWwgKTsKICAgIGNsZWFySW50ZXJ2YWwoIGludGVydmFsUmVuZGVyICk7Cn08L3NjcmlwdD4KICAgICAgICA8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiPmRvY3VtZW50LmJvZHkub25rZXlkb3duID0gZnVuY3Rpb24oIGUgKSB7CiAgICB2YXIga2V5cyA9IHsKICAgICAgICAzNzogJ2xlZnQnLAogICAgICAgIDM5OiAncmlnaHQnLAogICAgICAgIDQwOiAnZG93bicsCiAgICAgICAgMzg6ICdyb3RhdGUnLAogICAgICAgIDMyOiAnZHJvcCcKICAgIH07CiAgICBpZiAoIHR5cGVvZiBrZXlzWyBlLmtleUNvZGUgXSAhPSAndW5kZWZpbmVkJyApIHsKICAgICAgICBrZXlQcmVzcygga2V5c1sgZS5rZXlDb2RlIF0gKTsKICAgICAgICByZW5kZXIoKTsKICAgIH0KfTsKPC9zY3JpcHQ+CiAgICAgICAgPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij52YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdjYW52YXMnIClbIDAgXTsKdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCAnMmQnICk7CnZhciBXID0gMzAwLCBIID0gNjAwOwp2YXIgQkxPQ0tfVyA9IFcgLyBDT0xTLCBCTE9DS19IID0gSCAvIFJPV1M7CgovLyBkcmF3IGEgc2luZ2xlIHNxdWFyZSBhdCAoeCwgeSkKZnVuY3Rpb24gZHJhd0Jsb2NrKCB4LCB5ICkgewogICAgY3R4LmZpbGxSZWN0KCBCTE9DS19XICogeCwgQkxPQ0tfSCAqIHksIEJMT0NLX1cgLSAxICwgQkxPQ0tfSCAtIDEgKTsKICAgIGN0eC5zdHJva2VSZWN0KCBCTE9DS19XICogeCwgQkxPQ0tfSCAqIHksIEJMT0NLX1cgLSAxICwgQkxPQ0tfSCAtIDEgKTsKfQoKLy8gZHJhd3MgdGhlIGJvYXJkIGFuZCB0aGUgbW92aW5nIHNoYXBlCmZ1bmN0aW9uIHJlbmRlcigpIHsKICAgIGN0eC5jbGVhclJlY3QoIDAsIDAsIFcsIEggKTsKCiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snOwogICAgZm9yICggdmFyIHggPSAwOyB4IDwgQ09MUzsgKyt4ICkgewogICAgICAgIGZvciAoIHZhciB5ID0gMDsgeSA8IFJPV1M7ICsreSApIHsKICAgICAgICAgICAgaWYgKCBib2FyZFsgeSBdWyB4IF0gKSB7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3JzWyBib2FyZFsgeSBdWyB4IF0gLSAxIF07CiAgICAgICAgICAgICAgICBkcmF3QmxvY2soIHgsIHkgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBjdHguZmlsbFN0eWxlID0gJ3JlZCc7CiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snOwogICAgZm9yICggdmFyIHkgPSAwOyB5IDwgNDsgKyt5ICkgewogICAgICAgIGZvciAoIHZhciB4ID0gMDsgeCA8IDQ7ICsreCApIHsKICAgICAgICAgICAgaWYgKCBjdXJyZW50WyB5IF1bIHggXSApIHsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcnNbIGN1cnJlbnRbIHkgXVsgeCBdIC0gMSBdOwogICAgICAgICAgICAgICAgZHJhd0Jsb2NrKCBjdXJyZW50WCArIHgsIGN1cnJlbnRZICsgeSApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9PC9zY3JpcHQ+CiAgICA8L2JvZHk+CjwvaHRtbD4KPCEtLVN0eWxlOiBzdHlsZS5jc3MtLT4KPHN0eWxlPmNhbnZhcyB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIG1hcmdpbjogYXV0bzsKICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOwp9CgojcGxheWJ1dHRvbiB7CiAgICB3aWR0aDogMTAwcHg7CiAgICBoZWlnaHQ6IDUwcHg7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIG1hcmdpbjogYXV0bzsKICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICBmb250LXNpemU6IDMwcHg7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogICAgY3Vyc29yOiBwb2ludGVyOwp9PC9zdHlsZT4=">CanvasTetris</a></b>
