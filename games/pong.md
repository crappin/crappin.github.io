<b><a href="data:text/html;base64, PCEtLUhUTUw6IGh0bWwuaHRtbC0tPgo8IURPQ1RZUEUgaHRtbD4KPGh0bWw+Cgk8aGVhZD4KCQk8c3R5bGU+CgkJCWh0bWwsIGJvZHkgeyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IH0KCQk8L3N0eWxlPgoJCTxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+aWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkgewogIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKG9UaGlzKSB7CiAgICBpZiAodHlwZW9mIHRoaXMgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgLy8gY2xvc2VzdCB0aGluZyBwb3NzaWJsZSB0byB0aGUgRUNNQVNjcmlwdCA1IGludGVybmFsIElzQ2FsbGFibGUgZnVuY3Rpb24KICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgLSB3aGF0IGlzIHRyeWluZyB0byBiZSBib3VuZCBpcyBub3QgY2FsbGFibGUiKTsKICAgIH0KCiAgICB2YXIgYUFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCAKICAgICAgICBmVG9CaW5kID0gdGhpcywgCiAgICAgICAgZk5PUCA9IGZ1bmN0aW9uICgpIHt9LAogICAgICAgIGZCb3VuZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBmVG9CaW5kLmFwcGx5KHRoaXMgaW5zdGFuY2VvZiBmTk9QCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG9UaGlzIHx8IHdpbmRvdywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFBcmdzLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7CiAgICAgICAgfTsKCiAgICBmTk9QLnByb3RvdHlwZSA9IHRoaXMucHJvdG90eXBlOwogICAgZkJvdW5kLnByb3RvdHlwZSA9IG5ldyBmTk9QKCk7CgogICAgcmV0dXJuIGZCb3VuZDsKICB9Owp9CgooZnVuY3Rpb24oKSB7CiAgdmFyIGxhc3RUaW1lID0gMDsKICB2YXIgdmVuZG9ycyA9IFsnbXMnLCAnbW96JywgJ3dlYmtpdCcsICdvJ107CgogIGZvcih2YXIgeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KSB7CiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ1JlcXVlc3RBbmltYXRpb25GcmFtZSddOwogICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ10gCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IHdpbmRvd1t2ZW5kb3JzW3hdKydDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTsKICB9CgogIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkKICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaywgZWxlbWVudCkgewogICAgdmFyIGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB2YXIgdGltZVRvQ2FsbCA9IE1hdGgubWF4KDAsIDE2IC0gKGN1cnJUaW1lIC0gbGFzdFRpbWUpKTsKICAgIHZhciBpZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpOyB9LCAKICAgICAgdGltZVRvQ2FsbCk7CiAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDsKICAgIHJldHVybiBpZDsKICB9OwoKICBpZiAoIXdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSkKICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGlkKSB7CiAgICBjbGVhclRpbWVvdXQoaWQpOwogIH07Cn0oKSk7PC9zY3JpcHQ+CgkJPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij52YXIgS2V5ID0gZnVuY3Rpb24oKSB7Cgl2YXIgX3ByZXNzZWQgPSB7fTsKCXZhciByZXN1bHQgPSB7CgkJTEVGVDogMzcsCgkJVVA6IDM4LAoJCVJJR0hUOiAzOSwKCQlET1dOOiA0MCwKCQlXOiA4NywKCQlTOiA4MywKCQlEOiA2OCwKCgkJaXNEb3duOiBmdW5jdGlvbihrZXlDb2RlKSB7CgkJCXJldHVybiBfcHJlc3NlZFtrZXlDb2RlXTsKCQl9LAoKCQlvbktleWRvd246IGZ1bmN0aW9uKGUpIHsKCQkJX3ByZXNzZWRbZS5rZXlDb2RlXSA9IHRydWU7CgkJCWUucHJldmVudERlZmF1bHQoKTsKCQl9LAoKCQlvbktleXVwOiBmdW5jdGlvbihlKSB7CgkJCWRlbGV0ZSBfcHJlc3NlZFtlLmtleUNvZGVdOwoJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJfQoJfQoKCXJlc3VsdC5pc0Rvd24gPSByZXN1bHQuaXNEb3duLmJpbmQocmVzdWx0KTsKCXJlc3VsdC5vbktleWRvd24gPSByZXN1bHQub25LZXlkb3duLmJpbmQocmVzdWx0KTsKCXJlc3VsdC5vbktleXVwID0gcmVzdWx0Lm9uS2V5dXAuYmluZChyZXN1bHQpOwoKCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcmVzdWx0Lm9uS2V5ZG93bik7Cgl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCByZXN1bHQub25LZXl1cCk7CgoJcmV0dXJuIHJlc3VsdDsKfSgpOzwvc2NyaXB0PgoJCTxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+UG9uZyA9IGZ1bmN0aW9uKCkgewoKfQoKUG9uZy5BcmVuYSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHsKCXRoaXMud2lkdGggPSB3aWR0aDsKCXRoaXMuaGVpZ2h0ID0gaGVpZ2h0Owp9CgpQb25nLnByb3RvdHlwZSA9IHsKCWluaXRpYWxpc2U6IGZ1bmN0aW9uKCkgewoJCXRoaXMuc3ZnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKTsKCgkJdGhpcy5hcmVuYSA9IG5ldyBQb25nLkFyZW5hKDcwMCwgNTAwKTsKCQl0aGlzLnNjb3JlYm9hcmQgPSBuZXcgUG9uZy5TY29yZWJvYXJkKHRoaXMuc3ZnKTsKCQl0aGlzLmxlZnRCYXQgPSBuZXcgUG9uZy5CYXQodGhpcy5hcmVuYSwgMTAsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXQxJyksIEtleS5XLCBLZXkuUywgS2V5LkQpLAoJICAgIHRoaXMucmlnaHRCYXQgPSBuZXcgUG9uZy5CYXQodGhpcy5hcmVuYSwgNjgwLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmF0MicpLCBLZXkuVVAsIEtleS5ET1dOLCBLZXkuTEVGVCk7CgoJCXRoaXMuYmFsbCA9IG5ldyBQb25nLkJhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhbGwnKSwgdGhpcy5hcmVuYSwgdGhpcy5zY29yZWJvYXJkLCB0aGlzLmxlZnRCYXQsIHRoaXMucmlnaHRCYXQpCgkJdGhpcy5iYWxsLmZvbGxvd2luZyA9IHRoaXMubGVmdEJhdDsKCgkJUG9uZy5Tb3VuZHMuYWRkKCdCYXRIaXQnLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmF0SGl0JykpOwoKCQl0aGlzLnN0YXJ0VGltZXIoKTsKCX0sCglzdGFydFRpbWVyOiBmdW5jdGlvbigpIHsKCQl2YXIgdE9sZCA9IERhdGUubm93KCk7CgkJdmFyIHNlbGYgPSB0aGlzOwoKCQl3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uIHRpY2sodE5ldykgewoJCQl3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spOwoKCQkJdmFyIGRlbHRhID0gdE5ldyAtIHRPbGQ7CgkJCXRPbGQgPSB0TmV3OwoKCQkJc2VsZi51cGRhdGUoZGVsdGEpOwoJCX0pCgl9LAoJdXBkYXRlOiBmdW5jdGlvbihkZWx0YSkgewoJCXRoaXMubGVmdEJhdC51cGRhdGUoZGVsdGEpOwoJCXRoaXMucmlnaHRCYXQudXBkYXRlKGRlbHRhKTsKCQl0aGlzLmJhbGwudXBkYXRlKGRlbHRhKTsKCQkKCQl2YXIgaGFuZGxlID0gdGhpcy5zdmcuc3VzcGVuZFJlZHJhdyg1MDAwKTsKCgkJdGhpcy5iYWxsLmRyYXcoKTsKCQl0aGlzLmxlZnRCYXQuZHJhdygpOwoJCXRoaXMucmlnaHRCYXQuZHJhdygpOwoKCQl0aGlzLnN2Zy51bnN1c3BlbmRSZWRyYXcoaGFuZGxlKTsKCQl0aGlzLnN2Zy5mb3JjZVJlZHJhdygpOwoJfQp9PC9zY3JpcHQ+CgkJPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij5Qb25nLlNvdW5kcyA9IHsKCV9zb3VuZHM6IHt9LAoJYWRkOiBmdW5jdGlvbihuYW1lLCBlbGVtKSB7CgkJdGhpcy5fc291bmRzW25hbWVdID0gZWxlbTsKCX0sCglwbGF5OiBmdW5jdGlvbihuYW1lKSB7CgkJaWYgKHRoaXMuX3NvdW5kc1tuYW1lXSkgewoJCQl0aGlzLl9zb3VuZHNbbmFtZV0ucGxheSgpOwoJCX0KCX0KfTwvc2NyaXB0PgoJCTxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+UG9uZy5TY29yZSA9IGZ1bmN0aW9uKHN2ZywgeCwgeSkgewoJdGhpcy5zY29yZSA9IDA7Cgl0aGlzLmVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTsKCXRoaXMuZWxlbS5zZXRBdHRyaWJ1dGUoJ3gnLCB4KTsKCXRoaXMuZWxlbS5zZXRBdHRyaWJ1dGUoJ3knLCB5KTsKCXRoaXMuZWxlbS50ZXh0Q29udGVudCA9IHRoaXMuc2NvcmU7CglzdmcuYXBwZW5kQ2hpbGQodGhpcy5lbGVtKTsKfTsKClBvbmcuU2NvcmUucHJvdG90eXBlID0gewoJaW5jcmVtZW50OiBmdW5jdGlvbigpIHsKCQl0aGlzLnNjb3JlKys7CgkJdGhpcy5lbGVtLnRleHRDb250ZW50ID0gdGhpcy5zY29yZTsKCX0sCglyZXNldDogZnVuY3Rpb24oKSB7CgkJdGhpcy5zY29yZSA9IDA7CgkJdGhpcy5lbGVtLnRleHRDb250ZW50ID0gdGhpcy5zY29yZTsKCX0KfTsKClBvbmcuU2NvcmVib2FyZCA9IGZ1bmN0aW9uKHN2ZykgewoJdGhpcy5wMSA9IG5ldyBQb25nLlNjb3JlKHN2ZywgMzEwLCAzMCk7Cgl0aGlzLnAyID0gbmV3IFBvbmcuU2NvcmUoc3ZnLCAzNzAsIDMwKTsKfQoKUG9uZy5TY29yZWJvYXJkLnByb3RvdHlwZSA9IHsKCXJlc2V0OiBmdW5jdGlvbigpIHsKCQl0aGlzLnAxLnJlc2V0KCk7CgkJdGhpcy5wMi5yZXNldCgpOwoJfQp9OwoKPC9zY3JpcHQ+CgkJPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij5Qb25nLkJhbGwgPSBmdW5jdGlvbihlbGVtLCBhcmVuYSwgc2NvcmVib2FyZCwgbGVmdEJhdCwgcmlnaHRCYXQpIHsKCXRoaXMueCA9IGxlZnRCYXQueCArIGxlZnRCYXQud2lkdGggKyAxMDsKCXRoaXMueSA9IDI0NTsKCXRoaXMud2lkdGggPSAxMDsKCXRoaXMuaGVpZ2h0ID0gMTA7Cgl0aGlzLnZ4ID0gMiAvICgxMDAwIC8gNjApLAoJdGhpcy52eSA9IDIgLyAoMTAwMCAvIDYwKSwKCXRoaXMuZWxlbSA9IGVsZW07Cgl0aGlzLm1vdmluZyA9IHRydWU7Cgl0aGlzLmZvbGxvd2luZyA9IG51bGw7Cgl0aGlzLmFyZW5hID0gYXJlbmE7Cgl0aGlzLmxlZnRCYXQgPSBsZWZ0QmF0OwoJdGhpcy5yaWdodEJhdCA9IHJpZ2h0QmF0OwoJdGhpcy5zY29yZWJvYXJkID0gc2NvcmVib2FyZDsKCgl2YXIgc2VsZiA9IHRoaXM7CgoJdGhpcy5sZWZ0QmF0LmxhdW5jaCA9IGZ1bmN0aW9uKCkgewoJCWlmIChzZWxmLmZvbGxvd2luZykgewoJCQlzZWxmLnZ5ID0gc2VsZi5sZWZ0QmF0LmR5OwoJCQlzZWxmLnZ4ID0gMiAvICgxMDAwIC8gNjApOwoJCQlzZWxmLmZvbGxvd2luZyA9IG51bGw7CgkJfQoJfTsKCgl0aGlzLnJpZ2h0QmF0LmxhdW5jaCA9IGZ1bmN0aW9uKCkgewoJCWlmIChzZWxmLmZvbGxvd2luZykgewoJCQlzZWxmLnZ5ID0gc2VsZi5yaWdodEJhdC5keTsKCQkJc2VsZi52eCA9ICgyIC8gKDEwMDAgLyA2MCkpICogLTE7CgkJCXNlbGYuZm9sbG93aW5nID0gbnVsbDsKCQl9Cgl9Owp9CgoKUG9uZy5CYWxsLnByb3RvdHlwZSA9IHsKCXVwZGF0ZTogZnVuY3Rpb24oZHQpIHsKCQlpZiAodGhpcy5mb2xsb3dpbmcpIHsKCQkJdGhpcy55ID0gdGhpcy5mb2xsb3dpbmcueSArICh0aGlzLmZvbGxvd2luZy5oZWlnaHQgLyAyKSAtICh0aGlzLmhlaWdodCAvIDIpOwoJCQlyZXR1cm47CgkJfQoKCQlpZiAodGhpcy5tb3ZpbmcpIHsKCQkJdGhpcy5vbGRYID0gdGhpcy54OwoJCQl0aGlzLm9sZFkgPSB0aGlzLnk7CgoJCQl2YXIgZHggPSB0aGlzLnZ4ICogZHQsCgkJCSAgICBkeSA9IHRoaXMudnkgKiBkdDsKCgkJCXRoaXMubW92ZShkeCwgZHkpOwoJCX0KCX0sCgltb3ZlOiBmdW5jdGlvbihkeCwgZHkpIHsKCQl2YXIgYmF0ID0gZHg8IDAgPyB0aGlzLmxlZnRCYXQgOiB0aGlzLnJpZ2h0QmF0OwoKCQl2YXIgckJhdCA9IGJhdC5nZXRSZWN0KCksCgkJICAgIHJCYWxsID0gdGhpcy5nZXRSZWN0KCksCgkJICAgIHJOZXcgPSBuZXcgUG9uZy5SZWN0KHRoaXMueCArIGR4LCB0aGlzLnggKyBkeCArIHRoaXMud2lkdGgsIHRoaXMueSArIGR5LCB0aGlzLnkgKyBkeSArIHRoaXMuaGVpZ2h0KTsKCgkJaWYgKHJCYXQuaW50ZXJzZWN0KHJOZXcpKSB7CgkJCWlmIChyQmFsbC5ib3R0b20gPCByQmF0LnRvcCB8fCByQmFsbC50b3AgPiByQmF0LmJvdHRvbSkgewoJCQkJdGhpcy52eSAqPSAtMTsKCQkJfQoJCQllbHNlIHsKCQkJCXZhciBwID0gKChiYXQueSArIChiYXQuaGVpZ2h0IC8gMikpIC0gKHRoaXMueSArICh0aGlzLmhlaWdodCAvIDIpKSkgLyAoYmF0LmhlaWdodCAvIDIpICogMC4yOwoKCQkJCXRoaXMudnkgLT0gcDsKCQkJfQoKCQkJdGhpcy52eCAqPSAtMS4xOwoJCQlQb25nLlNvdW5kcy5wbGF5KCdCYXRIaXQnKTsKCgkJCXJldHVybjsKCQl9CgoJCWlmIChyTmV3LmJvdHRvbSA+IHRoaXMuYXJlbmEuaGVpZ2h0IHx8IHJOZXcudG9wIDwgMCkgewoJCQl0aGlzLnZ5ICo9IC0xOwoJCQlyZXR1cm47CgkJfQoKCQlpZiAock5ldy5yaWdodCA8IDApIHsKCQkJdGhpcy5zY29yZWJvYXJkLnAyLmluY3JlbWVudCgpOwoJCQl0aGlzLmZvbGxvd2luZyA9IHRoaXMubGVmdEJhdDsKCQkJdGhpcy54ID0gdGhpcy5sZWZ0QmF0LnggKyB0aGlzLmxlZnRCYXQud2lkdGggKyAxMDsKCQkJcmV0dXJuOwoJCX0KCgkJaWYgKHJOZXcubGVmdCA+IHRoaXMuYXJlbmEud2lkdGgpIHsKCQkJdGhpcy5zY29yZWJvYXJkLnAxLmluY3JlbWVudCgpOwoJCQl0aGlzLmZvbGxvd2luZyA9IHRoaXMucmlnaHRCYXQ7CgkJCXRoaXMueCA9IHRoaXMucmlnaHRCYXQueCAtICgxMCArIHRoaXMud2lkdGgpOwoJCQlyZXR1cm47CgkJfQoKCQl0aGlzLnggKz0gZHg7CgkJdGhpcy55ICs9IGR5OwoJfSwKCWRyYXc6IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbS54LmJhc2VWYWwudmFsdWUgPSB0aGlzLng7CgkJdGhpcy5lbGVtLnkuYmFzZVZhbC52YWx1ZSA9IHRoaXMueTsKCX0sCglzdG9wOiBmdW5jdGlvbigpIHsKCQl0aGlzLm1vdmluZyA9IGZhbHNlOwoJfSwKCXN0YXJ0OiBmdW5jdGlvbigpIHsKCQl0aGlzLm1vdmluZyA9IHRydWU7Cgl9LAoJZ2V0UmVjdDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIG5ldyBQb25nLlJlY3QodGhpcy54LCB0aGlzLnggKyB0aGlzLndpZHRoLCB0aGlzLnksIHRoaXMueSArIHRoaXMuaGVpZ2h0KTsKCX0sCglyZXNldDogZnVuY3Rpb24oKSB7CgkJdGhpcy54ID0gMzA7CgkJdGhpcy55ID0gKHRoaXMuYXJlbmEuaGVpZ2h0IC8gMikgLSAodGhpcy5oZWlnaHQgLyAyKQoJfQp9PC9zY3JpcHQ+CgkJPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij5Qb25nLkJhdCA9IGZ1bmN0aW9uKGFyZW5hLCB4UG9zLCBlbGVtZW50LCB1cEtleSwgZG93bktleSwgbGF1bmNoS2V5KSB7Cgl0aGlzLmFyZW5hID0gYXJlbmE7Cgl0aGlzLnggPSB4UG9zOwoJdGhpcy5oZWlnaHQgPSA1MDsKCXRoaXMud2lkdGggPSAxMDsKCXRoaXMueSA9ICh0aGlzLmFyZW5hLmhlaWdodCAvIDIpIC0gKHRoaXMuaGVpZ2h0IC8gMik7Cgl0aGlzLnZ5ID0gNCAvICgxMDAwIC8gNjApOwoJdGhpcy5lbGVtID0gZWxlbWVudDsKCXRoaXMuZG93bktleSA9IGRvd25LZXk7Cgl0aGlzLnVwS2V5ID0gdXBLZXk7Cgl0aGlzLmxhdW5jaEtleSA9IGxhdW5jaEtleTsKfTsKClBvbmcuQmF0LnByb3RvdHlwZSA9IHsKCWxhdW5jaDogZnVuY3Rpb24oKSB7fSwKCXVwZGF0ZTogZnVuY3Rpb24oZHQpIHsKCQl0aGlzLmR5ID0gMDsKCgkJaWYgKEtleS5pc0Rvd24odGhpcy5sYXVuY2hLZXkpKSB7CgkJCXRoaXMubGF1bmNoKCk7CgkJfQoKCQlpZiAoS2V5LmlzRG93bih0aGlzLmRvd25LZXkpKSB7CgkJCWlmIChLZXkuaXNEb3duKHRoaXMudXBLZXkpKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCXRoaXMuZHkgPSB0aGlzLnZ5ICogZHQ7CgkJCXRoaXMueSArPSB0aGlzLmR5OwoKCQkJaWYgKHRoaXMueSA+IHRoaXMuYXJlbmEuaGVpZ2h0IC0gdGhpcy5oZWlnaHQpIHsKCQkJCXRoaXMueSA9IHRoaXMuYXJlbmEuaGVpZ2h0IC0gdGhpcy5oZWlnaHQ7CgkJCX0KCgkJCXJldHVybjsKCQl9CgkJCgkJaWYgKEtleS5pc0Rvd24odGhpcy51cEtleSkpIHsKCQkJaWYgKEtleS5pc0Rvd24odGhpcy5kb3duS2V5KSkgewoJCQkJcmV0dXJuOwoJCQl9CgoJCQl0aGlzLmR5ID0gdGhpcy52eSAqIGR0OwoJCQl0aGlzLnkgLT0gdGhpcy5keTsKCgkJCWlmICh0aGlzLnkgPCAwKSB7CgkJCQl0aGlzLnkgPSAwOwoJCQl9CgoJCQlyZXR1cm47CgkJfQoJfSwKCWRyYXc6IGZ1bmN0aW9uKCkgewoJCXRoaXMuZWxlbS54LmJhc2VWYWwudmFsdWUgPSB0aGlzLng7CgkJdGhpcy5lbGVtLnkuYmFzZVZhbC52YWx1ZSA9IHRoaXMueTsKCX0sCglyZXNldDogZnVuY3Rpb24oKSB7CgkJdGhpcy55ID0gKGFyZW5hLmhlaWdodCAvIDIpIC0gKHRoaXMuaGVpZ2h0IC8gMik7Cgl9LAoJZ2V0UmVjdDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIG5ldyBQb25nLlJlY3QodGhpcy54LCB0aGlzLnggKyB0aGlzLndpZHRoLCB0aGlzLnksIHRoaXMueSArIHRoaXMuaGVpZ2h0KTsKCX0KfTs8L3NjcmlwdD4KCQk8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiPlBvbmcuUmVjdCA9IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSkgewoJdGhpcy5sZWZ0ID0gbGVmdDsKCXRoaXMucmlnaHQgPSByaWdodDsKCXRoaXMudG9wID0gdG9wOwoJdGhpcy5ib3R0b20gPSBib3R0b207Cn0KClBvbmcuUmVjdC5wcm90b3R5cGUgPSB7CglpbnRlcnNlY3Q6IGZ1bmN0aW9uKHIpIHsKCQlyZXR1cm4gISgKCQkJdGhpcy5sZWZ0ID4gci5yaWdodCB8fAoJCQl0aGlzLnJpZ2h0IDwgci5sZWZ0IHx8CgkJCXRoaXMudG9wID4gci5ib3R0b20gfHwKCQkJdGhpcy5ib3R0b20gPCByLnRvcAoJCSk7IAoJfQp9Ozwvc2NyaXB0PgoJPC9oZWFkPgoJPGJvZHk+CgkJPGF1ZGlvIGlkPSJiYXRIaXQiPgoJCQk8c291cmNlIHNyYz0ibWVkaWEvYmF0LWhpdC5tcDMiIHR5cGU9ImF1ZGlvL21wMyI+CgkJCTxzb3VyY2Ugc3JjPSJtZWRpYS9iYXQtaGl0LndhdiIgdHlwZT0iYXVkaW8vd2F2ZSI+CgkJPC9hdWRpbz4KCQk8c3ZnIGlkPSJnYW1lIiB2aWV3Ym94PSIwIDAgNzAwIDUwMCIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJSI+CgkJCTxzdHlsZT4KCQkJCSNiYWNrZHJvcCB7CgkJCQkJZmlsbDogYmxhY2s7CgkJCQl9CgoJCQkJI25ldCByZWN0IHsKCQkJCQlmaWxsOiB3aGl0ZTsKCQkJCX0KCgkJCQkuYmF0IHsKCQkJCQlmaWxsOiB3aGl0ZTsKCQkJCX0KCgkJCQkjYmFsbCB7CgkJCQkJZmlsbDogd2hpdGU7CgkJCQl9CgoJCQkJdGV4dCB7CgkJCQkJZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7CgkJCQkJZm9udC1zaXplOiAzMnB4OwoJCQkJCXRleHQtYWxpZ246IHJpZ2h0OwoJCQkJCWZpbGw6IHdoaXRlOwoJCQkJfQoJCQk8L3N0eWxlPgoJCQk8cmVjdCBpZD0iYmFja2Ryb3AiIHg9IjAiIHk9IjAiIHdpZHRoPSI3MDAiIGhlaWdodD0iNTAwIj48L3JlY3Q+CQoJCQk8ZyBpZD0ibmV0Ij4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjEwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjMwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjUwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjcwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjkwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjExMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CgkJCQkJPHJlY3QgeD0iMzQ1IiB5PSIxMzAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCQkJCTxyZWN0IHg9IjM0NSIgeT0iMTUwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjE3MCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CgkJCQkJPHJlY3QgeD0iMzQ1IiB5PSIxOTAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCQkJCTxyZWN0IHg9IjM0NSIgeT0iMjEwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjIzMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CgkJCQkJPHJlY3QgeD0iMzQ1IiB5PSIyNTAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCQkJCTxyZWN0IHg9IjM0NSIgeT0iMjcwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjI5MCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CgkJCQkJPHJlY3QgeD0iMzQ1IiB5PSIzMTAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCQkJCTxyZWN0IHg9IjM0NSIgeT0iMzMwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjM1MCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CgkJCQkJPHJlY3QgeD0iMzQ1IiB5PSIzNzAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCQkJCTxyZWN0IHg9IjM0NSIgeT0iMzkwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjQxMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CgkJCQkJPHJlY3QgeD0iMzQ1IiB5PSI0MzAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCQkJCTxyZWN0IHg9IjM0NSIgeT0iNDUwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiPjwvcmVjdD4KCQkJCQk8cmVjdCB4PSIzNDUiIHk9IjQ3MCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+CgkJCQkJPHJlY3QgeD0iMzQ1IiB5PSI0OTAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCQkJPC9nPgoJCQkJPHJlY3QgaWQ9ImJhdDEiIGNsYXNzPSJiYXQiIHg9IjEwIiB5PSIxMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjUwIj48L3JlY3Q+CgkJCQk8cmVjdCBpZD0iYmF0MiIgY2xhc3M9ImJhdCIgeD0iNjgwIiB5PSIxMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjUwIj48L3JlY3Q+CgkJCQk8cmVjdCBpZD0iYmFsbCIgeD0iMTAwIiB5PSIyNDUiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PgoJCTwvc3ZnPgoKCQk8c2NyaXB0PgoJCQluZXcgUG9uZygpLmluaXRpYWxpc2UoKTsKCQk8L3NjcmlwdD4KCTwvYm9keT4KPC9odG1sPg==">Pong</a></b>
